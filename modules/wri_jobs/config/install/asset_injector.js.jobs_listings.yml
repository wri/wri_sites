uuid: 76ecc03d-2b87-4540-b9c9-317da6af04bb
langcode: en
status: false
dependencies:
  module:
    - system
id: jobs_listings
label: 'Jobs Listings'
code: |-
  document.addEventListener("DOMContentLoaded", function () {
      
      // 1. Find the target link. We search the whole document for the link with class '.apply-link'
      const link = document.querySelector('a.apply-link');

      // Check if the link was found
      if (link && link.tagName === 'A') {
          
          // 2. Identify the direct parent container that we want to replace/modify.
          // In your new HTML, this is the '<div class="buttons...">' element.
          const originalContainer = link.parentElement;

          if (originalContainer) {
              
              // --- URL Modification (The Most Robust Logic) ---
              let rawUrl = link.getAttribute('href') || link.href; 
              
              // 1. Isolate the path by stripping any query parameters or hash fragments
              let pathOnly = rawUrl.split(/[?#]/)[0]; 

              // 2. Clean up any trailing slash
              if (pathOnly.endsWith('/')) {
                  pathOnly = pathOnly.slice(0, -1);
              }
              
              // 3. Construct the final URL with the required suffix
              const finalUrl = pathOnly + '/apply'; 
              // -------------------------------------------------

              
              // 4. Create the new button element (an <a> tag)
              const button = document.createElement('a');
              
              // Set the URL attribute
              button.setAttribute('href', finalUrl); 
              
              // Set the required text
              button.textContent = 'Apply'; 
              
              // Assign the class for external CSS styling (as requested, no inline styles)
              button.className = 'apply-button-custom'; 
              
              
              // 5. Insert the new button *before* the original container, then remove the container.
              // This ensures the new button replaces the entire old structure in the flow of the page.
              const parentOfContainer = originalContainer.parentElement;
              
              // Ensure we have a valid element to insert before
              if (parentOfContainer) {
                  parentOfContainer.insertBefore(button, originalContainer);
                  
                  // 6. Remove the entire original container holding the old link
                  originalContainer.remove();
              }
          } 
      }
  });
noscript: ''
noscriptRegion: {  }
jquery: false
header: false
preprocess: false
conditions:
  request_path:
    id: request_path
    negate: false
    pages: '/job/*'
contexts: {  }
conditions_require_all: true
